{"version":3,"sources":["webpack:///static/js/17.13d1d4b4f8592c7fe236.js","webpack:///./src/mixins/common/_id_mixin.js?2613","webpack:///./src/components/common/edit.vue","webpack:///edit.vue","webpack:///./src/components/common/edit.vue?a135"],"names":["webpackJsonp","763","module","__webpack_exports__","__webpack_require__","Object","defineProperty","value","props","idfield","type","String","default","computed","id","this","data","871","exports","Component","942","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default","n","__WEBPACK_IMPORTED_MODULE_1__editor_editor__","__WEBPACK_IMPORTED_MODULE_1__editor_editor___default","__WEBPACK_IMPORTED_MODULE_2__mixins_common_id_mixin_js__","__WEBPACK_IMPORTED_MODULE_3__server_common_js__","__WEBPACK_IMPORTED_MODULE_4__helpers_utility_js__","name","mixins","components","editor","a","isShowEditbox","edit_editor","required","field_list","editLink","doEditLink","title","autoValidate","Boolean","getInfoRequest","Function","doEditRequest","transformData","methods","showDialog","getEditFields","_this","resolve","reject","then","fields","reduce","arr","row","rowitem","fieldInfo","field","configDefault","editorComponent","hasOwnProperty","push","label","tip","validator","catch","doEdit","_this2","$refs","editbox","validate","$message","message","duration","$emit","err","965","render","_vm","_h","$createElement","_c","_self","attrs","size","on","click","_v","visible","update:visible","$event","ref","slot","staticRenderFns"],"mappings":"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","file":"static/js/17.13d1d4b4f8592c7fe236.js","sourcesContent":["webpackJsonp([17,36],{\n\n/***/ 763:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    props: {\n        idfield: {\n            type: String,\n            default: \"id\"\n        }\n    },\n    computed: {\n        id: function id() {\n            return this.data[this.idfield];\n        }\n    }\n});\n\n/***/ }),\n\n/***/ 871:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(51)(\n  /* script */\n  __webpack_require__(942),\n  /* template */\n  __webpack_require__(965),\n  /* styles */\n  null,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 942:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__ = __webpack_require__(149);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__editor_editor__ = __webpack_require__(774);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__editor_editor___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__editor_editor__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__mixins_common_id_mixin_js__ = __webpack_require__(763);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__server_common_js__ = __webpack_require__(723);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__helpers_utility_js__ = __webpack_require__(750);\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: \"edit\",\n    mixins: [__WEBPACK_IMPORTED_MODULE_2__mixins_common_id_mixin_js__[\"default\"]],\n    components: {\n        editor: __WEBPACK_IMPORTED_MODULE_1__editor_editor___default.a\n    },\n    data: function data() {\n        return {\n            isShowEditbox: false,\n            edit_editor: []\n        };\n    },\n\n    props: {\n        data: {\n            type: Object,\n            required: true\n        },\n        field_list: {\n            type: Object,\n            required: true\n        },\n        editLink: {\n            type: String\n        },\n        doEditLink: {\n            type: String\n        },\n        title: {\n            type: String,\n            default: \"编辑\"\n        },\n        autoValidate: {\n            type: Boolean,\n            default: false\n        },\n        getInfoRequest: {\n            type: Function,\n            default: __WEBPACK_IMPORTED_MODULE_3__server_common_js__[\"getEditInfo\"]\n        },\n        doEditRequest: {\n            type: Function,\n            default: __WEBPACK_IMPORTED_MODULE_3__server_common_js__[\"doEdit\"]\n        },\n        transformData: {\n            type: Function,\n            default: function _default(data) {\n                return data;\n            }\n        }\n\n    },\n    methods: {\n        showDialog: function showDialog() {\n            this.isShowEditbox = true;\n        },\n        getEditFields: function getEditFields() {\n            var _this = this;\n\n            new __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default.a(function (resolve, reject) {\n                _this.getInfoRequest(_this, resolve);\n            }).then(function (fields) {\n                _this.edit_editor = fields.reduce(function (arr, row) {\n                    var rowitem = row.reduce(function (rowitem, fieldInfo) {\n                        var field = fieldInfo.field;\n                        var configDefault = _this.field_list[field].editorComponent.default;\n\n                        var value = fieldInfo.hasOwnProperty('value') ? fieldInfo.value : typeof configDefault === 'function' ? configDefault() : configDefault;\n\n                        rowitem.push({\n                            field: field,\n                            value: value,\n                            label: _this.field_list[field].label,\n                            editorComponent: _this.field_list[field].editorComponent,\n                            tip: _this.field_list[field].tip,\n                            validator: _this.field_list[field].validator\n                        });\n                        return rowitem;\n                    }, []);\n\n                    arr.push(rowitem);\n                    return arr;\n                }, []);\n\n                _this.showDialog();\n            }).catch(__WEBPACK_IMPORTED_MODULE_4__helpers_utility_js__[\"noop\"]);\n        },\n        doEdit: function doEdit() {\n            var _this2 = this;\n\n            this.$refs.editbox.validate().then(function (data) {\n                new __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default.a(function (resolve, reject) {\n                    _this2.doEditRequest(_this2, _this2.transformData(data), resolve);\n                }).then(function () {\n                    _this2.$message({\n                        message: \"编辑成功\",\n                        type: \"success\",\n                        duration: 2000\n                    });\n\n                    _this2.isShowEditbox = false;\n                    _this2.$emit('update');\n                }).catch(__WEBPACK_IMPORTED_MODULE_4__helpers_utility_js__[\"noop\"]);\n            }).catch(function (err) {\n                _this2.$message(err);\n            });\n        }\n    }\n});\n\n/***/ }),\n\n/***/ 965:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('span', [_c('el-button', {\n    attrs: {\n      \"size\": \"small\"\n    },\n    on: {\n      \"click\": _vm.getEditFields\n    }\n  }, [_vm._v(\"\\n        编辑\\n    \")]), _vm._v(\" \"), _c('el-dialog', {\n    attrs: {\n      \"title\": _vm.title,\n      \"visible\": _vm.isShowEditbox,\n      \"size\": \"large\"\n    },\n    on: {\n      \"update:visible\": function($event) {\n        _vm.isShowEditbox = $event\n      }\n    }\n  }, [_c('editor', {\n    ref: \"editbox\",\n    attrs: {\n      \"fields\": _vm.edit_editor,\n      \"autoValidate\": _vm.autoValidate\n    }\n  }), _vm._v(\" \"), _c('section', {\n    attrs: {\n      \"slot\": \"footer\"\n    },\n    slot: \"footer\"\n  }, [_c('el-button', {\n    on: {\n      \"click\": function($event) {\n        _vm.isShowEditbox = false\n      }\n    }\n  }, [_vm._v(\"取消\")]), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"danger\"\n    },\n    on: {\n      \"click\": _vm.doEdit\n    }\n  }, [_vm._v(\"\\n                确认编辑\\n            \")])], 1)], 1)], 1)\n},staticRenderFns: []}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/17.13d1d4b4f8592c7fe236.js","export default{\r\n    props:{\r\n        idfield:{\r\n            type:String,\r\n            default:\"id\"\r\n        }\r\n    },\r\n    computed:{\r\n        id(){\r\n            return this.data[this.idfield];\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/mixins/common/_id_mixin.js","var Component = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./edit.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-66a96c16\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./edit.vue\"),\n  /* styles */\n  null,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/common/edit.vue\n// module id = 871\n// module chunks = 17","<template>\n    <span>\n        <el-button\n            @click=\"getEditFields\"\n            size=\"small\"\n        >\n            编辑\n        </el-button>\n        <el-dialog\n            :title=\"title\"\n            :visible.sync=\"isShowEditbox\"\n            size=\"large\"\n        >\n            <editor\n                :fields=\"edit_editor\"\n                :autoValidate=\"autoValidate\"\n                ref=\"editbox\"\n            ></editor>\n            <section slot=\"footer\">\n                <el-button @click=\"isShowEditbox=false\">取消</el-button>\n                <el-button\n                    type=\"danger\"\n                    @click=\"doEdit\"\n                >\n                    确认编辑\n                </el-button>\n            </section>\n        </el-dialog>\n    </span>\n</template>\n\n<script>\nimport editor from \"@/editor/editor\";\nimport _id_mixin from \"@/mixins/common/_id_mixin.js\"\nimport {getEditInfo,doEdit} from \"@/server/common.js\"\nimport {noop} from \"@/helpers/utility.js\"\nexport default {\n    name:\"edit\",\n    mixins:[\n        _id_mixin,\n    ],\n    components:{\n        editor,\n    },\n    data(){\n        return {\n            isShowEditbox:false,\n            edit_editor:[],\n        }\n    },\n    props:{\n        data:{\n            type:Object,\n            required:true,\n        },\n        field_list:{\n            type:Object,\n            required:true,\n        },\n        editLink:{\n            type:String,\n        },\n        doEditLink:{\n            type:String,\n        },\n        title:{\n            type:String,\n            default:\"编辑\",\n        },\n        autoValidate:{\n            type:Boolean,\n            default:false,\n        },\n        getInfoRequest:{\n            type:Function,\n            default:getEditInfo,\n        },\n        doEditRequest:{\n            type:Function,\n            default:doEdit\n        },\n        transformData:{\n            type:Function,\n            default:function(data){\n                return data;\n            }\n        },\n\n    },\n    methods:{\n        showDialog(){\n            this.isShowEditbox = true;\n        },\n        getEditFields(){\n            new Promise((resolve,reject)=>{\n                this.getInfoRequest(this,resolve);\n            }).then((fields)=>{\n                this.edit_editor = fields.reduce((arr,row)=>{\n                    let rowitem = row.reduce((rowitem,fieldInfo)=>{\n                        let field = fieldInfo.field;\n                        let configDefault = this.field_list[field].editorComponent.default;\n\n                        let value = fieldInfo.hasOwnProperty('value')?fieldInfo.value:(typeof configDefault === 'function'? configDefault():configDefault );\n\n                        rowitem.push({\n                            field,\n                            value,\n                            label:this.field_list[field].label,\n                            editorComponent:this.field_list[field].editorComponent,\n                            tip:this.field_list[field].tip,\n                            validator:this.field_list[field].validator,\n                        })\n                        return rowitem;\n                    },[])\n\n                    arr.push(rowitem);\n                    return arr;\n                },[]);\n\n                this.showDialog();\n            }).catch(noop);\n        },\n        doEdit(){\n            this.$refs.editbox.validate().then((data)=>{\n                new Promise((resolve,reject)=>{\n                    this.doEditRequest(this,this.transformData(data),resolve)\n                }).then(()=>{\n                    this.$message({\n                        message:\"编辑成功\",\n                        type:\"success\",\n                        duration:2000,\n                    });\n\n                    this.isShowEditbox = false;\n                    this.$emit('update');\n                }).catch(noop);\n\n            }).catch((err)=>{\n                this.$message(err);\n            })\n\n        },\n    },\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// edit.vue?86ec3eb2","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('span', [_c('el-button', {\n    attrs: {\n      \"size\": \"small\"\n    },\n    on: {\n      \"click\": _vm.getEditFields\n    }\n  }, [_vm._v(\"\\n        编辑\\n    \")]), _vm._v(\" \"), _c('el-dialog', {\n    attrs: {\n      \"title\": _vm.title,\n      \"visible\": _vm.isShowEditbox,\n      \"size\": \"large\"\n    },\n    on: {\n      \"update:visible\": function($event) {\n        _vm.isShowEditbox = $event\n      }\n    }\n  }, [_c('editor', {\n    ref: \"editbox\",\n    attrs: {\n      \"fields\": _vm.edit_editor,\n      \"autoValidate\": _vm.autoValidate\n    }\n  }), _vm._v(\" \"), _c('section', {\n    attrs: {\n      \"slot\": \"footer\"\n    },\n    slot: \"footer\"\n  }, [_c('el-button', {\n    on: {\n      \"click\": function($event) {\n        _vm.isShowEditbox = false\n      }\n    }\n  }, [_vm._v(\"取消\")]), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"danger\"\n    },\n    on: {\n      \"click\": _vm.doEdit\n    }\n  }, [_vm._v(\"\\n                确认编辑\\n            \")])], 1)], 1)], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-66a96c16\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/common/edit.vue\n// module id = 965\n// module chunks = 17"],"sourceRoot":""}