webpackJsonp([11],{104:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(17),o=n(664),r=n(152),a=n(79);i.default.use(o.a);var u=[{path:"/test/test_basic",component:function(){return n.e(7).then(n.bind(null,708))}},{path:"/test/test_upload",component:function(){return n.e(9).then(n.bind(null,713))}},{path:"/test/test_ts",component:function(){return n.e(8).then(n.bind(null,712))}},{path:"/test/test_enum",component:function(){return n.e(4).then(n.bind(null,709))}},{path:"/test/test_tag",component:function(){return n.e(5).then(n.bind(null,711))}},{path:"/test/test_filter",component:function(){return n.e(6).then(n.bind(null,710))}},{path:"/",redirect:"/index/index"},{path:"/index/login",component:function(){return n.e(0).then(n.bind(null,715))},meta:{title:"登录"}}];r.default.forEach(function(e){(e.children||[]).forEach(function(e){u.push({path:e.path,component:e.component,meta:e.meta})})});var s=new o.a({routes:u});s.beforeEach(function(e,t,n){var i=!1;if(e.query.redirect&&a.default.commit("uri/setRedirect",e.query.redirect),e.meta&&e.meta.privilege&&Array.isArray(e.meta.privilege)){for(var o=e.meta.privilege,r=a.default.state.userInfo.privilege,u=!1,s=0,c=r.length;s<c;s++){var l=r[s];if(o.includes(l)){u=!0;break}}u||(i=!0)}var d="admin";if(e.meta&&e.meta.title&&(d=e.meta.title),a.default.commit("title/updateTitie",d),i)n({path:"/index/login",query:{redirect:e.fullPath}});else{var f=e.path.replace(/^\//,"").split("/");a.default.commit("uri/updateBasicUri",{controller_name:f[0],method_name:f[1],path:e.path}),n()}}),t.default=s},151:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(149),o=n.n(i),r=n(308),a=n.n(r),u=n(652),s=n.n(u),c=n(17),l=n(79),d=n(104),f=a.a.create({});f.defaults.baseURL="https://jiangshanmeta.github.io",f.defaults.headers.post["X-Requested-With"]="XMLHttpRequest",f.defaults.headers.get["X-Requested-With"]="XMLHttpRequest",f.defaults.responseType="json",f.defaults.transformRequest=[function(e){return s.a.stringify(e)}],f.defaults.validateStatus=function(e){return!0},f.interceptors.request.use(function(e){e.headers.Accept="application/json";var t=c.default.localStorage.get("token");return t&&(e.headers.Token=t),e}),f.interceptors.response.use(function(e){var t=e.data,n=e.status;if(200===n||304===n){return t.rstno>0?t:o.a.reject(e)}return 412===n&&(l.default.dispatch("doLogout"),d.default.push({path:"/index/login",query:{redirect:l.default.state.uri.path}})),o.a.reject(e)});var h=["get","post"],p={};h.forEach(function(e){p[e]=function(t,n,i){return new o.a(function(o,r){f[e](t,n,i).then(function(e){o(e)}).catch(function(e){200===e.status&&e.data.rstno<0&&c.default.prototype.$message(e.data.data.err.msg)})})}}),t.default=p},152:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=[{label:"首页",controller_name:"index",icon:"el-icon-menu",children:[{path:"/index/index",label:"个人中心",component:function(){return n.e(1).then(n.bind(null,714))},meta:{privilege:[1],title:"个人中心"}}]},{label:"客户",controller_name:"crm",icon:"el-icon-share",children:[{path:"/crm/index",component:function(){return n.e(3).then(n.bind(null,707))},label:"客户列表",meta:{privilege:[1,999],model:"userModel",title:"客户列表"}}]},{label:"订单",controller_name:"book",icon:"el-icon-setting",children:[{path:"/book/index",label:"订单列表",component:function(){return n.e(2).then(n.bind(null,706))},meta:{privilege:[73,999],model:"bookModel",title:"订单列表"}}]}]},153:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(272),o=n.n(i),r=n(150),a=n.n(r),u=n(61),s=n.n(u);t.default={install:function(e){e.mixin({beforeCreate:function(){var e=this,t=this.$options,n=t.config;if(n&&"object"===(void 0===n?"undefined":s()(n))){a()(n).forEach(function(t){o()(e,t,{value:n[t]})})}}})}}},154:function(e,t,n){function i(e){n(647)}var o=n(51)(n(328),n(659),i,null,null);e.exports=o.exports},155:function(e,t){},156:function(e,t){},157:function(e,t){},267:function(e,t){},269:function(e,t,n){function i(e){n(648)}var o=n(51)(n(327),n(661),i,null,null);e.exports=o.exports},275:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(17),o=n(268),r=n.n(o),a=n(270),u=n.n(a),s=n(153),c=n(104),l=n(79),d=n(151),f=n(266),h=n.n(f),p=n(267),v=(n.n(p),n(265)),m=(n.n(v),n(269)),g=n.n(m),_=n(154),b=n.n(_),y=n(155),x=(n.n(y),n(156)),M=(n.n(x),n(157));n.n(M);i.default.use(r.a),i.default.use(u.a),i.default.use(s.default),Object.defineProperty(i.default.prototype,"$axios",{value:d.default}),i.default.use(h.a),i.default.component("chart",g.a),i.default.config.productionTip=!1;new i.default({el:"#app",router:c.default,store:l.default,render:function(e){return e("App")},components:{App:b.a}})},276:function(e,t,n){"use strict";function i(e){var t={data:{token:"admin"},rstno:1};return u.a.resolve(t)}function o(){var e={data:{msg:"登出成功"},rstno:1};return u.a.resolve(e)}function r(){var e={data:{name:"不萌的山山",privilege:[1,2,3,5,7,10,233,999]},rstno:1};return u.a.resolve(e)}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"doLogin",function(){return i}),n.d(t,"doLogout",function(){return o}),n.d(t,"getUserInfo",function(){return r});var a=n(149),u=n.n(a)},277:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={namespaced:!0,state:{title:"admin"},mutations:{updateTitie:function(e,t){e.title=t}}}},278:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={namespaced:!0,state:{controller_name:"",method_name:"",path:"",redirect:""},mutations:{updateBasicUri:function(e,t){e.controller_name=t.controller_name,e.method_name=t.method_name,e.path=t.path},setRedirect:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e.redirect=t}}}},279:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(150),o=n.n(i);t.default={namespaced:!0,state:{name:"",privilege:[]},mutations:{resetUserInfo:function(e){e.name="",e.privilege=[]},initUserInfo:function(e,t){o()(e).forEach(function(n){e[n]=t[n]})}}}},280:function(e,t,n){function i(e){n(649)}var o=n(51)(n(329),n(662),i,"data-v-6f041846",null);e.exports=o.exports},281:function(e,t,n){var i=n(51)(n(330),n(660),null,null,null);e.exports=i.exports},282:function(e,t,n){function i(e){n(646)}var o=n(51)(n(331),n(658),i,"data-v-222de64e",null);e.exports=o.exports},283:function(e,t,n){var i=n(51)(n(332),n(663),null,null,null);e.exports=i.exports},327:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(335),o=n.n(i),r=n(1),a=n.n(r),u=n(651),s=n.n(u),c=n(17),l=["legendselectchanged","legendselected","legendunselected","datazoom","datarangeselected","timelinechanged","timelineplaychanged","restore","dataviewchanged","magictypechanged","geoselectchanged","geoselected","geounselected","pieselectchanged","pieselected","pieunselected","mapselectchanged","mapselected","mapunselected","axisareaselected","focusnodeadjacency","unfocusnodeadjacency","brush","brushselected"],d=["click","dblclick","mouseover","mouseout","mousedown","mouseup","globalout"];t.default={props:{options:Object,theme:[String,Object],initOptions:Object,group:String,autoResize:Boolean,watchShallow:Boolean},data:function(){return{chart:null}},computed:{width:{cache:!1,get:function(){return this.delegateGet("width","getWidth")}},height:{cache:!1,get:function(){return this.delegateGet("height","getHeight")}},isDisposed:{cache:!1,get:function(){return!!this.delegateGet("isDisposed","isDisposed")}},computedOptions:{cache:!1,get:function(){return this.delegateGet("computedOptions","getOption")}}},watch:{group:function(e){this.chart.group=e}},methods:{mergeOptions:function(e,t,n){this.delegateMethod("setOption",e,t,n)},resize:function(e){this.delegateMethod("resize",e)},dispatchAction:function(e){this.delegateMethod("dispatchAction",e)},convertToPixel:function(e,t){return this.delegateMethod("convertToPixel",e,t)},convertFromPixel:function(e,t){return this.delegateMethod("convertFromPixel",e,t)},containPixel:function(e,t){return this.delegateMethod("containPixel",e,t)},showLoading:function(e,t){this.delegateMethod("showLoading",e,t)},hideLoading:function(){this.delegateMethod("hideLoading")},getDataURL:function(e){return this.delegateMethod("getDataURL",e)},getConnectedDataURL:function(e){return this.delegateMethod("getConnectedDataURL",e)},clear:function(){this.delegateMethod("clear")},dispose:function(){this.delegateMethod("dispose")},delegateMethod:function(e){var t;if(!this.chart)return void c.default.util.warn("Cannot call ["+e+"] before the chart is initialized. Set prop [options] first.",this);for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return(t=this.chart)[e].apply(t,o()(i))},delegateGet:function(e,t){return this.chart||c.default.util.warn("Cannot get ["+e+"] before the chart is initialized. Set prop [options] first.",this),this.chart[t]()},init:function(){var e=this;if(!this.chart){var t=a.a.init(this.$el,this.theme,this.initOptions);this.group&&(t.group=this.group),t.setOption(this.options,!0),l.forEach(function(n){t.on(n,function(t){e.$emit(n,t)})}),d.forEach(function(n){t.on(n,function(t){e.$emit(n,t),e.$emit("chart"+n,t)})}),this.autoResize&&(this.__resizeHanlder=s()(function(){t.resize()},100,{leading:!0}),window.addEventListener("resize",this.__resizeHanlder)),this.chart=t}},destroy:function(){this.autoResize&&window.removeEventListener("resize",this.__resizeHanlder),this.dispose(),this.chart=null},refresh:function(){this.destroy(),this.init()}},created:function(){var e=this;this.$watch("options",function(t){!e.chart&&t?e.init():e.chart.setOption(e.options,!0)},{deep:!this.watchShallow}),["theme","initOptions","autoResize","watchShallow"].forEach(function(t){e.$watch(t,function(){e.refresh()},{deep:!0})})},mounted:function(){this.options&&this.init()},activated:function(){this.autoResize&&this.chart&&this.chart.resize()},beforeDestroy:function(){this.chart&&this.destroy()},connect:function(e){"string"!=typeof e&&(e=e.map(function(e){return e.chart})),a.a.connect(e)},disconnect:function(e){a.a.disConnect(e)},registerMap:function(){a.a.registerMap.apply(a.a,arguments)},registerTheme:function(){a.a.registerTheme.apply(a.a,arguments)}}},328:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(282),o=n.n(i),r=n(281),a=n.n(r),u=n(280),s=n.n(u),c=n(283),l=n.n(c);t.default={name:"app",components:{topNav:o.a,sideMenu:a.a,bottomFooter:s.a,vueTitle:l.a},watch:{"$store.state.isLogin":function(e){e?this.$router.replace({path:this.$store.state.uri.redirect||"/"}):this.$router.push({path:"/index/login"})}},created:function(){this.$localStorage.get("token")&&!this.$store.state.isLogin&&this.$store.dispatch("getUserInfo")}}},329:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={}},330:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(271),o=n.n(i),r=n(152);t.default={data:function(){return{menu:r.default}},props:{isLogin:{type:Boolean,default:!1},uri:{type:String,default:""},privilege:{type:Array,default:function(){return[]}}},computed:{controllerPrivilege:function(){return this.menu.reduce(function(e,t){var n=t.controller_name,i=t.children,r=void 0===i?[]:i;return e[n]=[],r.forEach(function(t){var i=t.meta;i=void 0===i?{}:i;var r=i.privilege,a=void 0===r?[]:r,u=!0,s=!1,c=void 0;try{for(var l,d=o()(a);!(u=(l=d.next()).done);u=!0){var f=l.value;e[n].includes(f)||e[n].push(f)}}catch(e){s=!0,c=e}finally{try{!u&&d.return&&d.return()}finally{if(s)throw c}}}),e},{})},userPrivilegeHash:function(){return this.privilege.reduce(function(e,t){return e[t]=!0,e},{})},computedMenu:function(){var e=this;return this.menu.reduce(function(t,n){var i=n.controller_name;if(e.checkHasPrivilege(e.controllerPrivilege[i])){var o={};o.label=n.label,o.icon=n.icon,o.controller_name=n.controller_name;var r=n.children||[];o.children=r.reduce(function(t,n){return e.checkHasPrivilege(n.meta&&n.meta.privilege)&&t.push({label:n.label,path:n.path}),t},[]),t.push(o)}return t},[])}},methods:{checkHasPrivilege:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=!0,n=!1,i=void 0;try{for(var r,a=o()(e);!(t=(r=a.next()).done);t=!0){var u=r.value;if(this.userPrivilegeHash.hasOwnProperty(u))return!0}}catch(e){n=!0,i=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw i}}return!1}}}},331:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={methods:{doLogout:function(){this.$store.dispatch("doLogout")}}}},332:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={mounted:function(){this.updateTitle()},beforeUpdate:function(){this.updateTitle()},methods:{updateTitle:function(){var e=this.$slots.default;if(!(void 0===e||e.length<1||"string"!=typeof e[0].text)){var t=e[0].text;t!==document.title&&(document.title=t)}}}}},646:function(e,t){},647:function(e,t){},648:function(e,t){},649:function(e,t){},658:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",{staticClass:"admin-header"},[e._m(0),e._v(" "),n("div",{staticClass:"pull-right"},[n("a",{staticClass:"pull-left"},[e._v(e._s(e.$store.state.userInfo.name))]),e._v(" "),e.$store.state.isLogin?n("a",{staticClass:"pull-left",on:{click:e.doLogout}},[e._v("\n           退出\n       ")]):e._e()])])},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pull-left"},[n("a",[e._v("管理系统")])])}]}},659:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"min-height":"100vh",display:"flex","flex-direction":"column"},attrs:{id:"app"}},[n("vue-title",{},[e._v(e._s(e.$store.state.title.title))]),e._v(" "),n("top-nav"),e._v(" "),n("div",{staticStyle:{"flex-grow":"1",display:"flex","max-width":"100%"}},[n("side-menu",{staticStyle:{flex:"0 0 auto"},attrs:{uri:e.$store.state.uri.path,"is-login":e.$store.state.isLogin,privilege:e.$store.state.userInfo.privilege}}),e._v(" "),n("main",{staticStyle:{flex:"1 1 auto","max-width":"100%",padding:"15px"}},[n("router-view")],1)],1),e._v(" "),n("bottom-footer")],1)},staticRenderFns:[]}},660:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isLogin?n("el-menu",{staticStyle:{width:"200px"},attrs:{router:!0,"default-active":e.uri,"unique-opened":!0}},e._l(e.computedMenu,function(t){return n("el-submenu",{key:t.path,attrs:{index:t.controller_name}},[n("template",{slot:"title"},[n("i",{class:t.icon}),e._v("\n            "+e._s(t.label)+"\n        ")]),e._v(" "),e._l(t.children,function(t){return n("el-menu-item",{key:t.path,attrs:{index:t.path}},[e._v("\n            "+e._s(t.label)+"\n        ")])})],2)})):e._e()},staticRenderFns:[]}},661:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"echarts"})},staticRenderFns:[]}},662:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("footer",{staticClass:"admin-footer"},[n("div",{staticClass:"text-center"},[e._v("jiangshanmeta")])])}]}},663:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;e._self._c;return e._e()},staticRenderFns:[]}},79:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(17),o=n(666),r=n(276),a=n(277),u=n(278),s=n(279);i.default.use(o.a),t.default=new o.a.Store({modules:{title:a.default,uri:u.default,userInfo:s.default},state:{isLogin:!1},mutations:{setLogin:function(e){e.isLogin=!0},setLogout:function(e){i.default.localStorage.remove("token"),e.isLogin=!1}},actions:{doLogin:function(e,t){var o=e.dispatch;n.i(r.doLogin)(t).then(function(e){i.default.localStorage.set("token",e.data.token),o("getUserInfo")})},getUserInfo:function(e){var t=e.commit;return n.i(r.getUserInfo)().then(function(e){t("setLogin"),t("userInfo/initUserInfo",e.data)})},doLogout:function(e){var t=e.commit;return n.i(r.doLogout)().then(function(){t("setLogout"),t("userInfo/resetUserInfo"),t("uri/setRedirect")})}}})}},[275]);
//# sourceMappingURL=app.67dd10f48550610de7d5.js.map