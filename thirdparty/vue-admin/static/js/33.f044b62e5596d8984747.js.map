{"version":3,"sources":["webpack:///static/js/33.f044b62e5596d8984747.js","webpack:///./src/widget/utility.js?3ecd","webpack:///./src/server/user.js?ac0e"],"names":["webpackJsonp","772","module","__webpack_exports__","__webpack_require__","enumArr2Hash","arr","label","arguments","length","undefined","value","reduce","obj","item","Object","defineProperty","d","791","getPrivilege","vm","data","cb","typ","req_typ","console","log","rst","privilegeEnum","slice","getCreateFields","createFields","createUser","id","userTable","push","getUserList","params","fields","total","getUserDetail","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_get_iterator___default","next","done","_ret","detailFields","row","rowInfo","arr2","field","typHash","v","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_typeof___default","err","return","getEditUserInfo","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","_ret2","editFields","editUser","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys___default","forEach","delUser","index","splice","genderEnum","typEnum","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys__","n","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_typeof__","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_get_iterator__","__WEBPACK_IMPORTED_MODULE_3__widget_utility_js__","name","gender","password","privilege","desc","0","1","i"],"mappings":"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","file":"static/js/33.f044b62e5596d8984747.js","sourcesContent":["webpackJsonp([33,34],{\n\n/***/ 772:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"enumArr2Hash\", function() { return enumArr2Hash; });\nfunction enumArr2Hash(arr) {\n    var label = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'label';\n    var value = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'value';\n\n    return arr.reduce(function (obj, item) {\n        obj[item[value]] = item[label];\n        return obj;\n    }, {});\n}\n\n\n\n/***/ }),\n\n/***/ 791:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"genderEnum\", function() { return genderEnum; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"typEnum\", function() { return typEnum; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"typHash\", function() { return typHash; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getPrivilege\", function() { return getPrivilege; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getCreateFields\", function() { return getCreateFields; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"createUser\", function() { return createUser; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getUserList\", function() { return getUserList; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getUserDetail\", function() { return getUserDetail; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getEditUserInfo\", function() { return getEditUserInfo; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"editUser\", function() { return editUser; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"delUser\", function() { return delUser; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys__ = __webpack_require__(150);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_typeof__ = __webpack_require__(61);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_typeof___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_typeof__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_get_iterator__ = __webpack_require__(271);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_get_iterator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_get_iterator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__widget_utility_js__ = __webpack_require__(772);\n\n\n\n\n\nvar userTable = [{\n    id: 1,\n    name: '渡边早季',\n    gender: 1,\n    password: '123456',\n    typ: 999,\n    privilege: [1, 2, 3, 5, 11, 123, 999],\n    desc: \"来自新世界的女主\"\n}, {\n    id: 2,\n    name: '朝比奈觉',\n    gender: 0,\n    password: 'qwerty',\n    typ: 99,\n    privilege: [1, 2, 3, 5],\n    desc: \"来自新世界的男主\"\n}, {\n    id: 3,\n    name: \"秋月真理亚\",\n    gender: 1,\n    password: \"123456\",\n    typ: 99,\n    privilege: [1, 2],\n    desc: \"早季的姬友\"\n}, {\n    id: 4,\n    name: \"伊东守\",\n    gender: 0,\n    password: \"wwwww\",\n    typ: 2,\n    privilege: [0, 1],\n    desc: \"~~~\"\n}, {\n    id: 5,\n    name: \"青沼瞬\",\n    gender: 0,\n    password: \"1234567\",\n    typ: 1,\n    privilege: [0],\n    desc: \"业魔化~\"\n}];\n\nvar id = userTable.length + 1;\n\nvar genderEnum = {\n    0: '男',\n    1: '女'\n};\n\nvar typEnum = [{ value: 0, label: '路人甲' }, { value: 1, label: '店小二' }, { value: 2, label: '收银员' }, { value: 99, label: '店掌柜' }, { value: 999, label: '管理员' }];\n\nvar typHash = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__widget_utility_js__[\"enumArr2Hash\"])(typEnum);\n\nvar privilegeEnum = [{ \"id\": 1, \"name\": \"游客\" }, { \"id\": 2, \"name\": \"打杂\" }, { \"id\": 3, \"name\": \"跑堂\" }, { \"id\": 5, \"name\": \"财务\" }, { \"id\": 11, \"name\": \"店长\" }, { \"id\": 123, \"name\": \"客服\" }, { \"id\": 999, \"name\": \"关小黑屋\" }];\n\nfunction getPrivilege(vm, data, cb) {\n    var typ = data.req_typ;\n    console.log(typ);\n    var rst = void 0;\n    switch (typ) {\n        case 0:\n            rst = privilegeEnum.slice(0, 1);\n            break;\n        case 1:\n            rst = privilegeEnum.slice(0, 2);\n            break;\n        case 2:\n            rst = privilegeEnum.slice(0, 4);\n            break;\n        case 99:\n            rst = privilegeEnum.slice(0, -2);\n            break;\n        case 999:\n            rst = privilegeEnum.slice(0);\n            break;\n        default:\n            rst = [];\n    }\n    cb(rst);\n}\n\nvar createFields = [[\"name\", \"password\"], [\"gender\", \"typ\"], [\"privilege\"]];\n\nfunction getCreateFields(vm, cb) {\n    cb(createFields);\n}\n\nfunction createUser(vm, data, cb) {\n    data.id = id++;\n    userTable.push(data);\n    cb();\n}\n\nfunction getUserList(vm, params, cb) {\n    var data = userTable;\n    var fields = [\"name\", \"gender\", \"typ\"];\n    var total = data.length;\n\n    cb({\n        data: data,\n        fields: fields,\n        total: total\n    });\n}\n\nvar detailFields = [[\"name\"], [\"gender\", \"typ\"], [\"desc\"]];\n\nfunction getUserDetail(vm, cb) {\n    var id = vm.id;\n\n    var _loop = function _loop(item) {\n        if (item.id === id) {\n            var rst = detailFields.reduce(function (arr, row) {\n                var rowInfo = row.reduce(function (arr2, field) {\n                    var value = item[field];\n                    if (field === 'typ') {\n                        console.log(value, typHash);\n                        value = typHash[value];\n                    }\n                    arr2.push({ field: field, value: value });\n                    return arr2;\n                }, []);\n                arr.push(rowInfo);\n                return arr;\n            }, []);\n\n            cb(rst);\n            return {\n                v: void 0\n            };\n        }\n    };\n\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n        for (var _iterator = __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_get_iterator___default()(userTable), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var item = _step.value;\n\n            var _ret = _loop(item);\n\n            if ((typeof _ret === 'undefined' ? 'undefined' : __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_typeof___default()(_ret)) === \"object\") return _ret.v;\n        }\n    } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n    } finally {\n        try {\n            if (!_iteratorNormalCompletion && _iterator.return) {\n                _iterator.return();\n            }\n        } finally {\n            if (_didIteratorError) {\n                throw _iteratorError;\n            }\n        }\n    }\n}\n\nvar editFields = [[\"name\"], [\"gender\", \"typ\"], [\"privilege\"], [\"desc\"]];\n\nfunction getEditUserInfo(vm, cb) {\n    var id = vm.id;\n\n    var _loop2 = function _loop2(item) {\n        if (item.id === id) {\n            var rst = editFields.reduce(function (arr, row) {\n                var rowInfo = row.reduce(function (arr2, field) {\n                    arr2.push({\n                        field: field,\n                        value: item[field]\n                    });\n\n                    return arr2;\n                }, []);\n\n                arr.push(rowInfo);\n                return arr;\n            }, []);\n            cb(rst);\n            return {\n                v: void 0\n            };\n        }\n    };\n\n    var _iteratorNormalCompletion2 = true;\n    var _didIteratorError2 = false;\n    var _iteratorError2 = undefined;\n\n    try {\n        for (var _iterator2 = __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_get_iterator___default()(userTable), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n            var item = _step2.value;\n\n            var _ret2 = _loop2(item);\n\n            if ((typeof _ret2 === 'undefined' ? 'undefined' : __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_typeof___default()(_ret2)) === \"object\") return _ret2.v;\n        }\n    } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n    } finally {\n        try {\n            if (!_iteratorNormalCompletion2 && _iterator2.return) {\n                _iterator2.return();\n            }\n        } finally {\n            if (_didIteratorError2) {\n                throw _iteratorError2;\n            }\n        }\n    }\n}\n\nfunction editUser(vm, data, cb) {\n    var id = vm.id;\n\n    var _loop3 = function _loop3(item) {\n        if (item.id === id) {\n            var keys = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys___default()(item);\n            keys.forEach(function (field) {\n                if (field in data) {\n                    item[field] = data[field];\n                }\n            });\n            return 'break';\n        }\n    };\n\n    var _iteratorNormalCompletion3 = true;\n    var _didIteratorError3 = false;\n    var _iteratorError3 = undefined;\n\n    try {\n        for (var _iterator3 = __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_get_iterator___default()(userTable), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n            var item = _step3.value;\n\n            var _ret3 = _loop3(item);\n\n            if (_ret3 === 'break') break;\n        }\n    } catch (err) {\n        _didIteratorError3 = true;\n        _iteratorError3 = err;\n    } finally {\n        try {\n            if (!_iteratorNormalCompletion3 && _iterator3.return) {\n                _iterator3.return();\n            }\n        } finally {\n            if (_didIteratorError3) {\n                throw _iteratorError3;\n            }\n        }\n    }\n\n    cb();\n}\n\nfunction delUser(vm, cb) {\n    var id = vm.id;\n    for (var index in userTable) {\n        if (userTable[index]['id'] === id) {\n            userTable.splice(index, 1);\n        }\n    }\n}\n\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/33.f044b62e5596d8984747.js","function enumArr2Hash(arr,label='label',value='value'){\r\n    return arr.reduce((obj,item)=>{\r\n        obj[item[value]] = item[label];\r\n        return obj;\r\n    },{})\r\n}\r\n\r\nexport {\r\n    enumArr2Hash,\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/widget/utility.js","import {enumArr2Hash} from \"@/widget/utility.js\"\r\n\r\nconst userTable = [\r\n    {\r\n        id:1,\r\n        name:'渡边早季',\r\n        gender:1,\r\n        password:'123456',\r\n        typ:999,\r\n        privilege:[1,2,3,5,11,123,999],\r\n        desc:\"来自新世界的女主\"\r\n    },\r\n    {\r\n        id:2,\r\n        name:'朝比奈觉',\r\n        gender:0,\r\n        password:'qwerty',\r\n        typ:99,\r\n        privilege:[1,2,3,5],\r\n        desc:\"来自新世界的男主\",\r\n    },\r\n    {\r\n        id:3,\r\n        name:\"秋月真理亚\",\r\n        gender:1,\r\n        password:\"123456\",\r\n        typ:99,\r\n        privilege:[1,2],\r\n        desc:\"早季的姬友\",\r\n    },\r\n    {\r\n        id:4,\r\n        name:\"伊东守\",\r\n        gender:0,\r\n        password:\"wwwww\",\r\n        typ:2,\r\n        privilege:[0,1],\r\n        desc:\"~~~\",\r\n    },\r\n    {\r\n        id:5,\r\n        name:\"青沼瞬\",\r\n        gender:0,\r\n        password:\"1234567\",\r\n        typ:1,\r\n        privilege:[0],\r\n        desc:\"业魔化~\"\r\n    }\r\n\r\n];\r\n\r\nlet id = userTable.length + 1;\r\n\r\nconst genderEnum = {\r\n    0:'男',\r\n    1:'女',\r\n}\r\n\r\nconst typEnum = [\r\n    {value:0,label:'路人甲'},\r\n    {value:1,label:'店小二'},\r\n    {value:2,label:'收银员'},\r\n    {value:99,label:'店掌柜'},\r\n    {value:999,label:'管理员'},\r\n]\r\n\r\nconst typHash = enumArr2Hash(typEnum);\r\n\r\nconst privilegeEnum = [\r\n    {\"id\":1,\"name\":\"游客\"},\r\n    {\"id\":2,\"name\":\"打杂\"},\r\n    {\"id\":3,\"name\":\"跑堂\"},\r\n    {\"id\":5,\"name\":\"财务\"},\r\n    {\"id\":11,\"name\":\"店长\"},\r\n    {\"id\":123,\"name\":\"客服\"},\r\n    {\"id\":999,\"name\":\"关小黑屋\"},\r\n];\r\n\r\nfunction getPrivilege(vm,data,cb){\r\n    let typ = data.req_typ;\r\n    console.log(typ)\r\n    let rst;\r\n    switch(typ){\r\n        case 0:\r\n            rst = privilegeEnum.slice(0,1);\r\n            break;\r\n        case 1:\r\n            rst = privilegeEnum.slice(0,2);\r\n            break;\r\n        case 2:\r\n            rst = privilegeEnum.slice(0,4);\r\n            break;\r\n        case 99:\r\n            rst = privilegeEnum.slice(0,-2);\r\n            break;\r\n        case 999:\r\n            rst = privilegeEnum.slice(0);\r\n            break;\r\n        default:\r\n            rst = [];\r\n    }\r\n    cb(rst);\r\n}\r\n\r\n\r\nconst createFields = [\r\n    [\"name\",\"password\"],\r\n    [\"gender\",\"typ\"],\r\n    [\"privilege\"],\r\n];\r\n\r\nfunction getCreateFields(vm,cb){\r\n    cb(createFields);\r\n}\r\n\r\nfunction createUser(vm,data,cb){\r\n    data.id = id++;\r\n    userTable.push(data);\r\n    cb();\r\n}\r\n\r\n\r\nfunction getUserList(vm,params,cb){\r\n    let data = userTable;\r\n    let fields = [\"name\",\"gender\",\"typ\"];\r\n    let total = data.length;\r\n\r\n    cb({\r\n        data,\r\n        fields,\r\n        total,\r\n    })\r\n}\r\n\r\nconst detailFields = [\r\n    [\"name\"],\r\n    [\"gender\",\"typ\"],\r\n    [\"desc\"],\r\n];\r\n\r\nfunction getUserDetail(vm,cb){\r\n    let id = vm.id;\r\n    for(let item of userTable){\r\n        if(item.id === id){\r\n            let rst = detailFields.reduce((arr,row)=>{\r\n                let rowInfo = row.reduce((arr2,field)=>{\r\n                    let value = item[field];\r\n                    if(field === 'typ'){\r\n                        console.log(value,typHash)\r\n                        value = typHash[value];\r\n                    }\r\n                    arr2.push({field,value});\r\n                    return arr2;\r\n                },[])\r\n                arr.push(rowInfo);\r\n                return arr;\r\n            },[]);\r\n\r\n            cb(rst)\r\n            return;\r\n        }\r\n    }\r\n}\r\n\r\nconst editFields = [\r\n    [\"name\"],\r\n    [\"gender\",\"typ\"],\r\n    [\"privilege\"],\r\n    [\"desc\"]\r\n];\r\n\r\nfunction getEditUserInfo(vm,cb){\r\n    let id = vm.id;\r\n    for(let item of userTable){\r\n        if(item.id === id){\r\n            let rst = editFields.reduce((arr,row)=>{\r\n                let rowInfo = row.reduce((arr2,field)=>{\r\n                    arr2.push({\r\n                        field,\r\n                        value:item[field],\r\n                    })\r\n\r\n                    return arr2;\r\n                },[]);\r\n\r\n                arr.push(rowInfo);\r\n                return arr;\r\n            },[])\r\n            cb(rst);\r\n            return;\r\n        }\r\n    }\r\n    \r\n}\r\n\r\nfunction editUser(vm,data,cb){\r\n    let id = vm.id;\r\n    for(let item of userTable){\r\n        if(item.id === id){\r\n            let keys = Object.keys(item);\r\n            keys.forEach((field)=>{\r\n                if(field in data){\r\n                    item[field] = data[field];\r\n                }\r\n            })\r\n            break;\r\n        }\r\n    }\r\n    cb();\r\n}\r\n\r\nfunction delUser(vm,cb){\r\n    let id = vm.id;\r\n    for(let index in userTable){\r\n        if(userTable[index]['id'] === id){\r\n            userTable.splice(index,1);\r\n        }\r\n    }\r\n}\r\n\r\nexport {\r\n    genderEnum,\r\n    typEnum,\r\n    typHash,\r\n    getPrivilege,\r\n    getCreateFields,\r\n    createUser,\r\n    getUserList,\r\n    getUserDetail,\r\n    getEditUserInfo,\r\n    editUser,\r\n    delUser,\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/server/user.js"],"sourceRoot":""}